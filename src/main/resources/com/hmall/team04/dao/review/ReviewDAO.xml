<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hmall.team04.dao.review.ReviewDAO">

	<!-- index.jsp와 관련된 prd_board 표시 기본형 -->
	<resultMap id="ReviewResult" type="reviewDTO">
		<result property="content" column="content" jdbcType="CLOB" javaType="java.lang.String" />
	</resultMap>

	<select id="getReviewList" parameterType="String" resultType="reviewDTO" resultMap="ReviewResult">
		select
		review_id, prd_board_id, user_id, content, star, ins_dt, file_yn
		from review_t rt
		WHERE rt.prd_board_id=#{prd_board_id}
	</select>
	<!-- 
	<select id="getReviewProductBoardList" resultType="reviewDTO" resultMap="ReviewResult">
		select
		pbt.prd_board_id, pbt.discount_rate, pbt.price, pbt.title, pbt.content, pbt.score, pbt.category, pbt.brand,
		pt.PRD_ID,
		ft.UPLOAD_PATH 
		from prd_board_t pbt
		LEFT JOIN PRD_T pt on(pbt.PRD_BOARD_ID=pt.PRD_BOARD_ID)
		LEFT JOIN FILE_T ft on(pbt.PRD_BOARD_ID =ft.ARTICLE_ID)
		where ft.board_flag='prd'
		order by prd_board_id
	</select>
	 -->
	<!-- 상품보드와 관련된 prd_board 표시 기본형 -->
	<!-- 
	<select id="getProductBoard" parameterType="String" resultType="ProductBoardDTO" resultMap="ProductBoardResult">
		select
		pbt.prd_board_id, pbt.discount_rate, pbt.price, pbt.title, pbt.content, pbt.score, pbt.category, pbt.brand,
		pt.PRD_ID,pt.option1,pt.option2,
		ft.UPLOAD_PATH 
		from prd_board_t pbt
		LEFT JOIN PRD_T pt on(pbt.PRD_BOARD_ID=pt.PRD_BOARD_ID)
		LEFT JOIN FILE_T ft on(pbt.PRD_BOARD_ID =ft.ARTICLE_ID)
		WHERE pbt.prd_board_id=#{board_subject} and ft.board_flag='prd'
		order by prd_board_id
	</select>
	 -->
</mapper>