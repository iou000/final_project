<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hmall.team04.dao.order.OrderDAO">

	<select id="getOrderCompleteList" parameterType="OrderCompleteDTO" resultType="OrderCompleteDTO">
	select pot.prd_order_id,pot.user_id,pot.address_dest,pot.hp_no,
	podt.prd_id,
	ppt.pmt_amount
	from prd_order_t pot
	left join prd_orderdetail_t podt on (pot.prd_order_id=podt.prd_order_id)
	left join prd_payment_t ppt on (pot.prd_order_id=ppt.prd_order_id)
	where pot.user_id=#{user_id} and pot.prd_order_id=#{prd_order_id}
	</select>

	<select id="getPrdPayment" parameterType="OrderCompleteDTO" resultType="OrderCompleteDTO">
		select pot.prd_order_id,pot.user_id,pot.address_dest,pot.hp_no,
		ppt.pmt_amount
		from prd_order_t pot
		left join prd_payment_t ppt on (pot.prd_order_id=ppt.prd_order_id)
		where pot.user_id=#{user_id} and ppt.prd_pmt_id=#{prd_pmt_id}
	</select>

	<select id="getOrderByOrderNo" resultType="OrderDTO">
		select * from order_t where order_id = #{orderNo}
	</select>

</mapper>